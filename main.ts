namespace SpriteKind {
    export const Collectable = SpriteKind.create()
}
sprites.onOverlap(SpriteKind.Projectile, SpriteKind.Collectable, function (sprite, otherSprite) {
    pause(500 - info.score() / 2)
    sprite.say("Yummy!", 500 - info.score() / 2)
    otherSprite.destroy()
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Projectile, function (sprite, otherSprite) {
    info.changeLifeBy(-1)
    sprite.say("ouch!", 500)
    otherSprite.setFlag(SpriteFlag.Ghost, true)
    pause(500)
    otherSprite.setFlag(SpriteFlag.Ghost, false)
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Collectable, function (sprite, otherSprite) {
    info.changeLifeBy(1)
    duckFood.destroy()
})
sprites.onDestroyed(SpriteKind.Projectile, function (sprite) {
    info.changeScoreBy(2)
})
let Duck: Sprite = null
let duckSpeech = 0
let duckFood: Sprite = null
scene.setBackgroundColor(1)
let thePlayer = sprites.create(img`
    . . . . . . f f f f . . . . . . 
    . . . . f f f 2 2 f f f . . . . 
    . . . f f f 2 2 2 2 f f f . . . 
    . . f f f e e e e e e f f f . . 
    . . f f e 2 2 2 2 2 2 e e f . . 
    . . f e 2 f f f f f f 2 e f . . 
    . . f f f f e e e e f f f f . . 
    . f f e f b f 4 4 f b f e f f . 
    . f e e 4 1 f d d f 1 4 e e f . 
    . . f e e d d d d d d e e f . . 
    . . . f e e 4 4 4 4 e e f . . . 
    . . e 4 f 2 2 2 2 2 2 f 4 e . . 
    . . 4 d f 2 2 2 2 2 2 f d 4 . . 
    . . 4 4 f 4 4 5 5 4 4 f 4 4 . . 
    . . . . . f f f f f f . . . . . 
    . . . . . f f . . f f . . . . . 
    `, SpriteKind.Player)
thePlayer.setStayInScreen(true)
controller.moveSprite(thePlayer)
info.setScore(0)
info.setLife(3)
game.onUpdateInterval(1000, function () {
    duckSpeech = randint(0, 20)
    Duck = sprites.createProjectileFromSide(img`
        . . . . . . . . . . b 5 b . . . 
        . . . . . . . . . b 5 b . . . . 
        . . . . . . b b b b b b . . . . 
        . . . . . b b 5 5 5 5 5 b . . . 
        . . . . b b 5 d 1 f 5 5 d f . . 
        . . . . b 5 5 1 f f 5 d 4 c . . 
        . . . . b 5 5 d f b d d 4 4 . . 
        . b b b d 5 5 5 5 5 4 4 4 4 4 b 
        b d d d b b d 5 5 4 4 4 4 4 b . 
        b b d 5 5 5 b 5 5 5 5 5 5 b . . 
        c d c 5 5 5 5 d 5 5 5 5 5 5 b . 
        c b d c d 5 5 b 5 5 5 5 5 5 b . 
        . c d d c c b d 5 5 5 5 5 d b . 
        . . c b d d d d d 5 5 5 b b . . 
        . . . c c c c c c c c b b . . . 
        . . . . . . . . . . . . . . . . 
        `, 40 + info.score(), 0)
    Duck.y = randint(1, 7) * 16
    if (duckSpeech == 0) {
        Duck.say("I'm Tom Cruise!", 500)
        Duck.setImage(img`
            ....................
            ....................
            ....................
            ...fff......fff.....
            ..f...f....f...f....
            ........ff..........
            ....f...ff...f......
            ........ff..........
            .......ffff.........
            .......f..f.........
            ......ff..ff........
            ......f....f........
            ......f....f........
            .......ffff.........
            ....................
            ....................
            ....ffffffffff......
            ....................
            ....................
            ....................
            `)
    }
})
game.onUpdateInterval(4000, function () {
    duckFood = sprites.create(img`
        ................................................
        ................ffffffffffff....................
        ..............fff7777777777fff..................
        .............ff77777777777777ff.................
        ............ff7777777777777777ff................
        ............ffff777777777777ffff................
        ............f77fff777777777ff77f................
        ............f7777fffffffffff777f................
        ............f777777777777777777f................
        ............f77777777777b5b7777f................
        ............f7777777777b5b77777f................
        ............f7777777bbbbbb77777f................
        ............f777777bb55555b7777f................
        ............f77777bb5d1f55df777f................
        ............f77777b551ff5d4c777f................
        ............f77777b55dfbdd44777f................
        ............f77bbbd5555544444b7f................
        ............f7bdddbbd5544444b77f................
        ............f7bbd555b555555b777f................
        ............f7cdc5555d555555b77f................
        ............f7cbdcd55b555555b77f................
        ............f77cddccbd55555db77f................
        ............f777cbddddd555bb777f................
        ............f7777ccccccccbb7777f................
        ............f777777777777777777f................
        ............f77fffff77777ff7777f................
        ............f77f7777777ff7ff777f................
        ............f77f7777777f777ff77f................
        ............f77f777777ff7777f77f................
        ............f77ffff777f77777f77f................
        ............f77f777777f77777f77f................
        ............f77f777777f77777f77f................
        ............f77f777777ff777ff77f................
        ............f77f77777777ffff777f................
        ............f777777777777777777f................
        ............f7777ff7777ffff7777f................
        ............f77ff7ff777f77ff777f................
        ............f77f777ff77f7777f77f................
        ............f7ff7777f77f7777f77f................
        ............f7f77777f77f7777f77f................
        ............f7f77777f77f7777f77f................
        ............f7f77777f77f777ff77f................
        ............f7ff777ff77f77ff777f................
        ............ff77ffff777ffff777ff................
        .............ff77777777777777ff.................
        ..............fff7777777777fff..................
        ................fff777777fff....................
        ..................ffffffff......................
        `, SpriteKind.Collectable)
    duckFood.setImage(scaling.scaleHalfX(img`
        ................................................
        ................ffffffffffff....................
        ..............fff7777777777fff..................
        .............ff77777777777777ff.................
        ............ff7777777777777777ff................
        ............ffff777777777777ffff................
        ............f77fff777777777ff77f................
        ............f7777fffffffffff777f................
        ............f777777777777777777f................
        ............f77777777777b5b7777f................
        ............f7777777777b5b77777f................
        ............f7777777bbbbbb77777f................
        ............f777777bb55555b7777f................
        ............f77777bb5d1f55df777f................
        ............f77777b551ff5d4c777f................
        ............f77777b55dfbdd44777f................
        ............f77bbbd5555544444b7f................
        ............f7bdddbbd5544444b77f................
        ............f7bbd555b555555b777f................
        ............f7cdc5555d555555b77f................
        ............f7cbdcd55b555555b77f................
        ............f77cddccbd55555db77f................
        ............f777cbddddd555bb777f................
        ............f7777ccccccccbb7777f................
        ............f777777777777777777f................
        ............f77fffff77777ff7777f................
        ............f77f7777777ff7ff777f................
        ............f77f7777777f777ff77f................
        ............f77f777777ff7777f77f................
        ............f77ffff777f77777f77f................
        ............f77f777777f77777f77f................
        ............f77f777777f77777f77f................
        ............f77f777777ff777ff77f................
        ............f77f77777777ffff777f................
        ............f777777777777777777f................
        ............f7777ff7777ffff7777f................
        ............f77ff7ff777f77ff777f................
        ............f77f777ff77f7777f77f................
        ............f7ff7777f77f7777f77f................
        ............f7f77777f77f7777f77f................
        ............f7f77777f77f7777f77f................
        ............f7f77777f77f777ff77f................
        ............f7ff777ff77f77ff777f................
        ............ff77ffff777ffff777ff................
        .............ff77777777777777ff.................
        ..............fff7777777777fff..................
        ................fff777777fff....................
        ..................ffffffff......................
        `))
    duckFood.x = randint(1, 9) * 16
    duckFood.y = randint(1, 7) * 16
})
